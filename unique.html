<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Boutique Produits - Vue en D√©tail</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- Section Produits -->
<div class="container py-5">
  <h2 class="text-center mb-4">üõçÔ∏è Nos Produits</h2>
  <div class="row" id="listeProduits"></div>
</div>

<!-- ‚úÖ MODALE D√âTAIL PRODUIT -->
<div class="modal fade" id="modalProduit" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body row g-4">
        <!-- Colonne image -->
        <div class="col-md-6">C:\xampp\htdocs\web\
          <img id="imageProduit" class="img-fluid w-100" src="assets/0014.jpg" alt="Image produit">
        </div>
        <!-- Colonne infos -->
        <div class="col-md-6">
          <h4 id="nomProduit"></h4>
          <p class="text-primary fw-bold fs-5" id="prixProduit"></p>
          <p class="text-muted" id="descProduit"></p>
          <label for="quantiteProduit">Quantit√© :</label>
          <input type="number" id="quantiteProduit" class="form-control w-50 mb-3" min="1" value="1">
          <button class="btn btn-success w-100">Ajouter au panier</button>
        </div>
      </div>
      <div class="modal-footer justify-content-between">
        <button class="btn btn-outline-secondary" id="btnPrec">‚Üê Pr√©c√©dent</button>
        <button class="btn btn-outline-secondary" id="btnSuiv">Suivant ‚Üí</button>
      </div>
    </div>
  </div>
</div>

<!-- üß∫ PANIER -->
<div class="container mt-5">
  <div class="card">
    <div class="card-header bg-primary text-white">üß∫ Mon Panier</div>
    <ul class="list-group list-group-flush" id="listePanier"></ul>
    <div class="card-footer text-end">
      <strong id="totalPanier">Total : 0.00 ‚Ç¨</strong>
      <button class="btn btn-danger btn-sm ms-3" onclick="viderPanier()">Vider</button>
    </div>
  </div>
</div>

<!-- üìù FORMULAIRE -->
<div class="container my-4">
  <div class="card">
    <div class="card-header">üìù Formulaire de commande</div>
    <div class="card-body">
      <form id="formCommande">
        <div class="mb-3">
          <label for="nom" class="form-label">Nom</label>
          <input type="text" id="nom" class="form-control" required>
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email" id="email" class="form-control" required>
        </div>
        <div class="mb-3">
          <label for="adresse" class="form-label">Adresse</label>
          <textarea id="adresse" class="form-control" rows="2" required></textarea>
        </div>
        <button class="btn btn-success">Valider la commande</button>
      </form>
      <div id="confirmation" class="alert alert-success mt-3 d-none"></div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Donn√©es des produits
  const produits = [
  {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0015.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0016.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0010.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0011.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0012.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0013.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0014.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0017.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0018.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0019.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0020.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0021.jpg"
  },
   {
    nom: "T-shirt blanc",
    prix: 19.99,
    description: "T-shirt 100% coton bio, tr√®s confortable.",
    image: "assets/img/0022.jpg"
  },
  {
    nom: "Casquette noire",
    prix: 15.50,
    description: "Casquette styl√©e pour l'√©t√©.",
    image: "assets/0014.jpg"  // Il y avait une erreur avec le point-virgule ici, il a √©t√© supprim√©.
  },
  {
    nom: "Lunettes de soleil",
    prix: 29.90,
    description: "Lunettes UV400 protection solaire.",
    image: "0015.jpg"
  },

  {
    nom: "Lunettes de soleil",
    prix: 29.90,
    description: "Lunettes UV400 protection solaire.",
    image: "0015.jpg"
  }
];


  let indexActuel = 0;
  let panier = JSON.parse(localStorage.getItem("panier")) || [];

  // Afficher les produits sur la page
  function afficherProduits() {
    const zone = document.getElementById("listeProduits");
    produits.forEach((p, i) => {
      zone.innerHTML += `
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <img src="${p.image}" class="card-img-top" style="cursor:pointer" alt="${p.nom}" onclick="ouvrirModal(${i})">
            <div class="card-body text-center">
              <h5>${p.nom}</h5>
              <p class="text-primary fw-bold">${p.prix.toFixed(2)} ‚Ç¨</p>
            </div>
          </div>
        </div>`;
    });
  }

  // Ouvrir la modale avec les infos du produit s√©lectionn√©
  function ouvrirModal(index) {
    indexActuel = index;
    const p = produits[index];

    document.getElementById("imageProduit").src = p.image;
    document.getElementById("nomProduit").textContent = p.nom;
    document.getElementById("prixProduit").textContent = p.prix.toFixed(2) + " ‚Ç¨";
    document.getElementById("descProduit").textContent = p.description;
    document.getElementById("quantiteProduit").value = 1;

    const modal = new bootstrap.Modal(document.getElementById("modalProduit"));
    modal.show();
  }

  // Boutons navigation dans la modale
  document.getElementById("btnPrec").onclick = () => {
    indexActuel = (indexActuel - 1 + produits.length) % produits.length;
    ouvrirModal(indexActuel);
  };

  document.getElementById("btnSuiv").onclick = () => {
    indexActuel = (indexActuel + 1) % produits.length;
    ouvrirModal(indexActuel);
  };

  // Ajouter au panier
  document.querySelector(".btn-success.w-100").addEventListener("click", () => {
    const quantite = parseInt(document.getElementById("quantiteProduit").value);
    const produit = produits[indexActuel];
    for (let i = 0; i < quantite; i++) {
      panier.push(produit);
    }
    localStorage.setItem("panier", JSON.stringify(panier));
    afficherPanier();
    bootstrap.Modal.getInstance(document.getElementById("modalProduit")).hide();
  });

  // Afficher les articles dans le panier
  function afficherPanier() {
    const liste = document.getElementById("listePanier");
    const totalEl = document.getElementById("totalPanier");
    liste.innerHTML = "";
    let total = 0;

    if (panier.length === 0) {
      liste.innerHTML = '<li class="list-group-item text-muted">Panier vide</li>';
      totalEl.textContent = "Total : 0.00 ‚Ç¨";
      return;
    }

    panier.forEach((item, i) => {
      total += item.prix;
      liste.innerHTML += `
        <li class="list-group-item d-flex justify-content-between align-items-center">
          ${item.nom}
          <div>
            <span>${item.prix.toFixed(2)} ‚Ç¨</span>
            <button class="btn btn-sm btn-outline-danger ms-2" onclick="supprimerDuPanier(${i})">üóëÔ∏è</button>
          </div>
        </li>`;
    });

    totalEl.textContent = "Total : " + total.toFixed(2) + " ‚Ç¨";
  }

  // Supprimer un produit du panier
  function supprimerDuPanier(index) {
    panier.splice(index, 1);
    localStorage.setItem("panier", JSON.stringify(panier));
    afficherPanier();
  }

  // Vider le panier
  function viderPanier() {
    panier = [];
    localStorage.removeItem("panier");
    afficherPanier();
  }

  // Gestion du formulaire de commande
  document.getElementById("formCommande").addEventListener("submit", function (e) {
    e.preventDefault();

    if (panier.length === 0) {
      alert("Votre panier est vide !");
      return;
    }

    const nom = document.getElementById("nom").value;
    const email = document.getElementById("email").value;
    const adresse = document.getElementById("adresse").value;

    const message = `Merci ${nom} ! Votre commande de ${panier.length} article(s) a bien √©t√© envoy√©e. Un e-mail de confirmation sera envoy√© √† ${email}.`;

    // R√©initialiser
    panier = [];
    localStorage.removeItem("panier");
    afficherPanier();
    document.getElementById("formCommande").reset();

    const confirmation = document.getElementById("confirmation");
    confirmation.classList.remove("d-none");
    confirmation.textContent = message;
  });

  // Initialisation de l'affichage
  afficherProduits();
  afficherPanier();
</script>

</body>
</html>
